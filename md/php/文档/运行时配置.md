# 运行时配置

## 配置位置
* `PHP_INI_USER`:只能脚本中(`ini_set()`)或`.user.ini`文件中设定
* `PHP_INI_PERDIR`:只能在`php.ini`、`.htaccess`、`httpd.conf`文件中设定
* `PHP_INI_SYSTEM`:只能在`php.ini`、`httpd.conf`文件中设定
* `PHP_INI_ALL`:可在任何地方设定

## session与cookie相关
* `session.save_path`
    * 值类型：string,默认为空字符串
    * 功能：会话数据保存的路径
    * 设置位置：PHP_INI_ALL
* `session.name`
    * 值类型：string,默认为`PHPSESSID`
    * 功能：会话用于`cookie`或`url`中的名称
    * 设置位置：PHP_INI_ALL
* `session.save_handler`
    * 值类型：string,默认为`files`
    * 功能：会话的模块名称,详见[会话](会话)的`session_module_name()`
    * 设置位置：PHP_INI_ALL
* `session.auto_start`:
    * 值类型：0|1,默认为`0`
    * 功能：是否开启自动会话
    * 设置位置：PHP_INI_PERDIR
* `session.gc_probability`
    * 值类型：int,默认为1
    * 功能：启动垃圾回收的概率分子
    * 设置位置：PHP_INI_ALL
* `session.gc_divisor`
    * 值类型：int,默认为100
    * 功能：启动垃圾回收的概率分母
    * 设置位置：PHP_INI_ALL
* `session.gc_maxlifetime`
    * 值类型：int,默认为`1440`
    * 功能；会话数据过了多少秒之后就会被认为是`垃圾`数据 
    * 设置位置：PHP_INI_ALL
* `session.serialize_handler`:
    * 值类型：string 
    * 功能：序列化的处理器名,可选的处理器如下: 
        * `php_serialize`:将键名和值当作一个数组序列化,由serialize()处理 
        * `php`:键名+竖线`|`+经过serialize()函数处理过的值。默认。若定义的序列化处理器模块不存在,亦使用此处理器
        * `php_binary`:键名的长度对应的ascii字符+键名+经过serialize()函数序列化后的值
        * `igbinary`:需要安装扩展`php-redis`
        * `wddx`:此选项需要编译时添加了`WDDX`支持 
    * 设置位置：PHP_INI_ALL
* `session.cookie_lifetime `
    * 值类型：int,默认为0
    * 功能：详见[会话](会话)的`session_set_cookie_params() lifetime`
    * 设置位置：PHP_INI_ALL
* `session.cookie_path`
    * 值类型：string,默认为`/`
    * 功能：详见[会话](会话)的`session_set_cookie_params() path`
    * 设置位置：PHP_INI_ALL
* `session.cookie_domain`
    * 值类型：string,默认为空字符串
    * 功能：详见[会话](会话)的`session_set_cookie_params() domain`
    * 设置位置：PHP_INI_ALL
* `session.cookie_secure`
    * 值类型：0|1,默认为`false`
    * 功能：详见[会话](会话)的`session_set_cookie_params() secure`
    * 设置位置：PHP_INI_ALL
* `session.cookie_httponly`
    * 值类型：0|1,默认为`false`
    * 功能：详见[会话](会话)的`session_set_cookie_params() httponly`
    * 设置位置：PHP_INI_ALL
* `session.cookie_samesite`
    * 值类型：string,默认为空字符串
    * 功能：详见[会话](会话)的`session_set_cookie_params() samesite`
    * 设置位置：PHP_INI_ALL
* `session.use_strict_mode`
    * 值类型：0|1,默认为`0`
    * 功能：是否启用严格的会话id模式,当启用后,会话id必须由php生成,不能由`session_id()`函数指定,即使调用此函数指定仍然由php自动生成
    * 设置位置：PHP_INI_ALL
* `session.use_cookies`
    * 值类型：0|1,默认为`1`
    * 功能：是否使用客户端`cookie`来存储会话ID 
    * 设置位置：PHP_INI_ALL
* `session.use_only_cookies`
    * 值类型：0|1,默认为`1`
    * 功能：是否仅使用客户端`cookie`来存储会话ID
* `session.referer_check`
    * 值类型：string,默认为空字符串
    * 功能：子串，用于验证来源网站是否符合要求。读取`$_SERVER['HTTP_REFERER']`变量,验证`子串`是否是`$_SERVER['HTTP_REFERER']`的一个子字符串,如果不是则当前会话失效;如果`isset($_SERVER['HTTP_REFERER'])===0`则不进行验证。注意此项检查仅适用于`["use_only_cookies"=>1]` 
    * 设置位置：PHP_INI_ALL
* `session.cache_limiter`
    * 值类型：string,默认为`nocache`
    * 功能：详见[会话](会话)的`session_cache_limiter()`
    * 设置位置：PHP_INI_ALL
* `session.cache_expire`
    * 值类型：int,默认为`180`
    * 功能：详见[会话](会话)的`session_cache_expire()`
    * 设置位置：PHP_INI_ALL
* `session.use_trans_sid`
    * 值类型：0|1,默认为`0`
    * 功能：是否在URL中启用自动传递会话id。仅适用于`session.use_only_cookies = 0`和`session.use_cookies = 0`时
    * 设置位置：PHP_INI_ALL
* `session.trans_sid_tags`
    * 值类型：string,默认值`a=href,area=href,frame=src,form=action`。
    * 功能：自动传递会话id的html标签列表,形式为`标签名1=url属性名1,标签名2=url属性名2,...`。仅适用于`session.use_trans_sid = 1`
    * 设置位置：PHP_INI_ALL
* `session.trans_sid_hosts`
    * 值类型：string,默认为`$_SERVER['HTTP_HOST']`
    * 功能：自动传递会话id的主机地址列表,形式为`host1,host2,host3` 
    * 设置位置：PHP_INI_ALL
* `session.sid_length`
    * 值类型：int,默认为32。范围为[26,250]
    * 功能：会话id的长度
    * 设置位置：PHP_INI_ALL
* `session.sid_bits_per_character`
    * 值类型：int,默认为5
    * 功能：由散列值生成的会话id的字符组成,它有以下值可取 
        * 4:`[0-9a-f]`
        * 5:`[0-9a-v]`
        * 6:`[0-9a-zA-Z,\-]`
    * 设置位置：PHP_INI_ALL
* `session.upload_progress.enabled`
    * 值类型：0|1,默认为`1`
    * 功能：是否开启文件上传进度跟踪 
    * 设置位置：PHP_INI_PERDIR
    * 要求：上传的表单中需要包含一个名为`ini_get("session.upload_progress.prefix").ini_get("session.upload_progress.name")`的表单项(设其值为`file_process_name`)且上传类型为`post`,表单提交后,在同一个`会话id`下可以使用`post`或`get`请求查询`$_SESSION`中的信息以获取上传进度,其中`$_SESSION`的键名为(`进度信息存储变量键名的前缀`+`表单项值`)的元素中存储了文件进度信息,内容如下:
        * `start_time`:`post`表单提交的时间戳
        * `content_length`:`post`表单中所有文件的总字节大小
        * `bytes_processed`:`post`表单中已经上传的文件的总字节大小
        * `done`:是否已经完成
        * `files`:索引数组,如上传了多个文件则索引从`0`开始依次排列,如果只上传了一个文件,则索引为`0`,每个文件的内容如下
            * `field_name`:表单中的文件输入控件的`name`属性的值
            * `name`:文件名
            * `tmp_name`:文件所在的临时路径位置。仅当文件上传完成后才有值,否则为`null`
            * `error`:错误信息数量
            * `done`:是否已经上传完成
            * `start_time`:当前文件开始上传的时间戳
            * `bytes_processed`:文件已经上传的字节大小
    * 设置位置：PHP_INI_PERDIR
* `session.upload_progress.cleanup`
    * 值类型：0|1,默认为`1`
    * 功能：当文件上传完成后且进度信息被读取完成后,是否自动清除文件上传进度信息 
    * 设置位置：PHP_INI_PERDIR
* `session.upload_progress.prefix`
    * 值类型：string,默认为`upload_progress_`
    * 功能：文件上传进度信息存储变量键名的前缀。后接`upload_progress.name`以作为`$_SESSION`中存储文件上传进度信息的的健名。
    * 设置位置：PHP_INI_PERDIR
* `session.upload_progress.name`
    * 值类型：string,默认为`PHP_SESSION_UPLOAD_PROGRESS`
    * 功能：文件上传进度信息存储变量键名的后缀。前接`upload_progress.prefix`以作为`$_SESSION`中存储文件上传进度信息的的健名。
    * 设置位置：PHP_INI_PERDIR
* `session.upload_progress.freq`
    * 值类型：int|string,默认为`1%`
    * 功能：文件上传进度信息的更新频率 
        * int,按已经上传的字节`bytes`数更新进度信息,即第上传多少字节就更新一次进度信息
        * string,按已经上传的文件大小占文件总大小的比例更新进度信息 
    * 设置位置：PHP_INI_PERDIR
* `session.upload_progress.min_freq`
    * 值类型：int,默认为`1`秒 
    * 功能：文件上传进度信息的最小更新频率(按时间秒算)
    * 设置位置：PHP_INI_PERDIR
* `session.lazy_write`
    * 值类型：0|1,默认为`1` 
    * 功能：是否仅在session数据有改动时才写入。0:无论数据是否改动只调用`write()`方法;1:在数据无改动时调用`update_timestamp()`,有改动时调用`write()`
    * 设置位置：PHP_INI_ALL
* `session.hash_function`
    * 值类型：int,默认为0
    * 功能：生成会话ID的散列算法
        * 0:`128位MD5`算法
        * 1:`160位SHA-1`算法
    * 设置位置：PHP_INI_ALL
* `session.hash_bits_per_character`
    * 值类型：int,默认为4
    * 功能：生成的散列值(此散列值用于生成会话id)的字符组成,它有以下值可取
        * 4:`[0-9a-f]`
        * 5:`[0-9a-v]`
        * 6:`[0-9a-zA-Z,\-]`
    * 设置位置：PHP_INI_ALL