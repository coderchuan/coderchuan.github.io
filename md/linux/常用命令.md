# 常用命令

## 安装ifconfig命令 
* ubuntu:`apt install net-tools`

## 链接文件路径 
* 创建软链接：`ln -s 原文件 指向原文件的软链接文件`
    * 注意：原文件的路径必须是绝对路径或相对于软链接文件的路径
* 创建硬链接：`ls 原文件名 新的硬链接文件名`
* 读取文件或链接文件所指向的绝对路径：`readlink -f 文件名`

## linux的`home`目录
* `root`用户:`/root`
* 普通用户:`/home/USERNAME`,其中`USERNAME`表示用户名。(仅限新建用户时指定了`-m`参数未指定`-d`参数时) 

## 新建组
`groupadd GROUPNAME`,其中`GROUPNAME`表示组名

## 新建用户
1. 先确定用户要加入哪个组,如果要加入的组不存在,则先`新建组`。设组名为`GROUPNAME`
1. 确定用户的用户名。设用户名为`USERNAME`
1. 执行`useradd -s /bin/bash -m -g GROUPNAME USERNAME`

## 将已经存在的用户添加到指定的组
`usermod -a -G GROUPNAME USERNAME`,其中`USERNAME`表示用户名,`GROUPNAME`表示组名

## 无法使用ssh密码登录远程服务器时添加ssh密钥登录
1. 登录远程服务器,进入目标用户的`home`目录
1. 执行`mkdir .ssh;chmod 700 .ssh;`
1. 复制公钥文本内容,设其文本为`PUBCONTENT`
1. 执行`echo PUBCONTENT >> .ssh/authorized_keys`
1. 执行`chmod 600 .ssh/authorized_keys`
1. 执行`chown -R USERNAME:GROUPNAME .ssh`,其中`USERNAME`表示用户名,`GROUPNAME`表示组名 

## 查看网卡及mac地址
* `` find /sys/ -type f -name address|grep devices|grep -v virtual|grep -Pio "[^/]+/address$"|grep -Pio "^[^/]+"|xargs -i sh -c 'echo {} `cat /sys/class/net/{}/address`' ``

## 通配符
* `*`:匹配所有字符
* `?`:匹配任意一个字符
* `[]`:范围符,`[abc]`表示匹配"abc"中的一个字符;`[a-z]`表示匹配"a"至"z"中的一个字符;`[1-9]`表示匹配"1"至"9"中的一个字符;`[1\-9]`表示匹配"19-"中的一个字符
* `[!]`或`[^]`:反向范围符,同`[]`,匹配不在此范围中的一个字符 
* `{}`:序列符,生成空格相隔的序列。`..`为连接符,如果`..`连接的不是序列则把`..`及两边的内容看作一个字符串整体。`,`为序列分隔符号,如果有`,`则把两个`,`之间的内容作为序列的一个成员。`{a..c}`表示"a b c",`{a..c,a..7}`表示"a..c a..7"

## 查找文件(夹) 
* 查找指定文件夹下的文件(夹):`find DIR -name TARGET_NAME`,其中`DIR`为指定的文件夹路径。`TARGET_NAME`被检索的名称,符合通配符规则
* 查找当前文件夹的文件(夹):`find -name TARGET_NAME`
* 查找指定文件夹下的文件:`find DIR -type f -name TARGET_NAME`
* 查找当前文件夹的文件:`find -type f -name TARGET_NAME`
* 查找指定文件夹下的文件夹:`find DIR -type d -name TARGET_NAME`
* 查找当前文件夹的文件夹:`find -type d -name TARGET_NAME`

## 将字符串作为命令执行
`sh -c 'COMMAND'`。其中`COMMAND`表示命令 

## 管道`|`
* 功能：将`|`之前的命令输出写入到管道文件,`|`之后的命令将管道文件的路径作为输入参数 
* 示例：`echo 'abc.txt'|cat`。将字符串"abc.txt"作为文本写入到管道文件中,`cat`输出管道文件的内容,内容为"abc.txt"

## xargs命令
* 功能：从管道文件中读取内容作为下一个命令的输入参数
* 示例：
    * 简单使用:`whoami | xargs groups`。`whoami`输出当前用户名称,`groups`命令后接用户名称输出当前用户的所有组 
    * 管道文件的内容多次使用:`echo 123 | xargs -i echo {} {}`。最终输出`123 123`
    * 管道文件的内容多次使用:`` echo release|xargs -i sh -c 'echo {} `cat /etc/*{}*`' ``

## 更改主机名
* `ubuntu`(设`NEW_NAME`是新主机名,`OLD_NAME`是旧主机名) 
    1. `cp /etc/hostname /etc/hostname.bak && cp /etc/hosts /etc/hosts.bak`
    1. `echo 'NEW_NAME' > /etc/hostname && hostname 'NEW_NAME'`
    1. `sed -i 's/[\t ]\+OLD_NAME[\t ]*/ NEW_NAME /g' /etc/hosts`

## sudo权限配置(编辑/etc/sudoers文件)
* 用户组`sudo`内的用户使用用户密码切换用户和用户组:`%sudo ALL=(ALL:ALL) ALL`
* 用户组`admin`内的用户无条件切换用户和用户组:`%admin ALL=(ALL:ALL) NOPASSWD: ALL`

