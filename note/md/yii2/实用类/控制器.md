## 控制器
* 定义时可继承
    * 控制台应用:`extends \yii\console\Controller`
    * 网页应用:`extends \yii\web\Controller`
    * 继承自定义类(自定义类必须直接或间接继承自`yii\base\Controller`类) 
* `yii\base\Controller`类
    * 属性
        * [所有属性](https://www.yiichina.com/doc/api/2.0/yii-base-controller#properties)
        * 继承的属性
            * [组件](./组件)
        * 重要属性
            * `route`
                * 类型：string
                * 功能：当前请求的完全路由
                * 权限：只读
            * `id`
                * 类型：string
                * 功能：控制器id
                * 权限：读写
            * `uniqueId`
                * 类型：string
                * 功能：控制器唯一id(如果存在于module中，则module会被作为前缀) 
                * 权限：只读
            * `viewPath`
                * 类型：string
                * 功能：视图文件所在的路径
                * 权限：读写
            * `defaultAction`
                * 类型：string
                * 功能：当未指定动作时，以此属性的值作为动作id
                * 权限：读写
    * 方法
        * [所有方法](https://www.yiichina.com/doc/api/2.0/yii-base-controller#methods)
        * 继承的方法
            * [组件](./组件)
            * [基类](./基类)
        * 重要方法
            * 属性函数 
                * setter函数 
                    * `public void setView($view)`
                    * `public void setViewPath($path)`
                * getter函数
                    * `public yii\base\Module[] getModules()`
                    * `public string getRoute()`
                    * `public string getUniqueId()`
                    * `public yii\base\View|yii\web\View getView()`
                    * `public string getViewPath()`
                    * `public yii\base\Behavior[] getBehaviors()`
            * 初始化方法
                * 特点：在类被构造时自动调用
                * 形式：有两种，如下：
                    ```php
                    public function __construct($id, $module, $config = [])
                    {
                        //先调用父类的构造函数
                        parent::__construct($id, $module, $config);
                        //然后写初始化语句
                        //...
                    }
                    ```
                    ```php
                    public function init()
                    {
                        //先调用父类的初始化函数 
                        parent::init();
                        //初始化语句
                        //...
                    }
                    ```
            * 自定义动作方法
                * 功能：当运行指定的动作id时执行定义的动作方法
                * 参数：
                    `\yii\base\Controller`类：无参数
                    `\yii\console\Controller`类：少于等于控制台中传入的参数个数。参数类型只能为`string`
                    `\yii\web\Controller`类：少于等于url中传入的参数个数。参数类型只能为`string`
                * 返回值：自定义
                * 注意
                    * 方法为`public`权限 
                    * 方法名以`action`为前缀的小驼峰命名
                    * [映射规则](../命名与映射规则) 
            * `public array behaviors()`
                * 功能：绑定行为到当前的控制器类中
                * 参数：无
                * 返回值：array。配置数组
                * 重写示例
                    ```php
                    public function behaviors()
                    {
                        return [
                            // 匿名行为，只有行为类名
                            MyBehavior::class,

                            // 命名行为，只有行为类名
                            'myBehavior2' => MyBehavior::class,

                            // 匿名行为，配置数组
                            [
                                'class' => MyBehavior::class,
                                'prop1' => 'value1',
                                'prop2' => 'value2',
                            ],

                            // 命名行为，配置数组
                            'myBehavior4' => [
                                'class' => MyBehavior::class,
                                'prop1' => 'value1',
                                'prop2' => 'value2',
                            ]
                        ];
                    }
                    ```
            * `public array actions()` 
                * 功能：对控制器类中的已经存在或不存在的`action`函数使用自定义Action类进行功能覆盖
                * 参数：无
                * 返回值：array。配置数组(有两种形式)
                * 重写示例
                    ```php
                    public function actions(){
                        return [
                                //形式一。"action"=>"action类"
                                "action1"=>"app\commands\action\test",

                                //形式二。"action_id"=>"action类配置"
                                "action2"=>[
                                    //自定义action类。形式为"class"=>"action类"
                                    "class"=>"app\commands\action\test",    
                                    //初始化自定义action类的属性值。形式为"属性名"=>"属性值"
                                    "property1"=>"value1",      
                                ],          
                        ]
                    }
                    ```
            * `public mixed afterAction($action, $result)`
                * 功能：当动作方法执行完成后要执行的函数。该方法会触发`EVENT_AFTER_ACTION`事件
                * 参数：
                    `action`：`yii\base\Action`，执行完毕的`action`
                    `result`：`mixed`，执行完毕的`action`的返回值
                * 返回值：array。配置数组，有两种形式
                * 重写示例
                    ```php
                    public function afterAction($action, $result)
                    {
                        $result = parent::afterAction($action, $result);
                        //自定义功能代码
                        return $result;
                    }
                    ```
                * 详细：[afterAction](https://www.yiichina.com/doc/api/2.0/yii-base-controller#afterAction()-detail)
            * `public boolean beforeAction($action)`
                * 功能：动作方法执行前将会执行此函数。此函数将会触发`EVENT_BEFORE_ACTION`事件
                * 参数：
                    `action`：`yii\base\Action`，将要执行的`action`
                * 返回值：bool
                * 重写示例：
                    ```php
                    public function beforeAction($action)
                    {
                        if (!parent::beforeAction($action)) {
                            return false;
                        }
                        //自定义功能代码
                        return true; 
                    }
                    ```
                * 详细：[beforeAction](https://www.yiichina.com/doc/api/2.0/yii-base-controller#beforeAction()-detail)
            * `public yii\base\Action|null createAction($id)`
                * 功能：当访问未被定义的动作方法时，此函数被执行。
                * 返回值：必须返回一个`Action`类实例
                * 详细：[createAction](https://www.yiichina.com/doc/api/2.0/yii-base-controller#createAction()-detail)
            * `public static string className()`
                * 功能：获取当前类名。建议此函数被`类名::class`所替代，它们的功能完全一致
                * 参数：无
                * 返回值：返回类名(完全限定)
            * `public string|boolean findLayoutFile($view)`
                * 功能：获取当前的布局文件路径
                * 详细：[findLayoutFile](https://www.yiichina.com/doc/api/2.0/yii-base-controller#findLayoutFile()-detail)
            * `public boolean hasMethod($name, $checkBehaviors = true)`
                * 功能：检测方法是否被定义
                * 参数
                    * `name`：方法名称
                    * `checkBehaviors`：是否检测被绑定的行为中的方法名
                * 返回值：bool
            * `public boolean hasProperty($name, $checkVars = true, $checkBehaviors = true)`
                * 功能：检测是否有属性(是否定义`getter`或`setter`函数)
                * 参数 
                    * `name`:属性名
                    * `checkVars`:是否检测成员变量
                    * `checkBehaviors`:是否检测被绑定的行为中的属性 
                * 返回值：bool
            * `public boolean canGetProperty($name, $checkVars = true, $checkBehaviors = true)`
                * 功能：检测是否可以获取属性(是否定义`getter`函数)
                * 参数：同上
                * 返回值：同上
            * `public boolean canSetProperty($name, $checkVars = true, $checkBehaviors = true)`
                * 功能：检测是否可以设置属性(是否定义`setter`函数)
                * 参数：同上
                * 返回值：同上
            * `public string render($view, $params = [])`
                * 功能：渲染视图(使用布局，可传递变量)
                * 参数
                    * `view`:`string`,视图名称。[解析规则](../命名与映射规则)
                    * `params`:传递到视图中的参数。在视图中，使用参数应该使用变量`$params`的键值作为变量名
                * 返回值：string。渲染结果
            * `public string renderPartial($view, $params = [])`
                * 功能：渲染视图(不使用布局，可传递变量)
                * 参数
                    * `view`:`string`,视图名称。[解析规则](../命名与映射规则)
                    * `params`:传递到视图中的参数。在视图中，使用参数应该使用变量`$params`的键值作为变量名
                * 返回值：string。渲染结果
            * `public string renderContent($content)`
                * 功能：渲染文本(使用布局，不可传递变量)
                * 参数
                    * `content`:string。要渲染的字符串
                * 返回值：string。渲染结果
            * `public string renderFile($file, $params = [])`
                * 功能：渲染文件(不使用布局，可传递变量)
                * 参数
                    * `file`:`string`,视图文件路径
                    * `params`:传递到文件中的参数。在文件中，使用参数应该使用变量`$params`的键值作为变量名
                * 返回值：string。渲染结果
            * `public mixed run($route, $params = [])`
                * 功能：运行指定的动作(可以在不同的控制器内)
                * 参数  
                    * `route`:string。动作的路由。如果只指定了动作id，则只在当前控制器中运行指定的动作id
                    * `params`:array。参数，不能指定键值，按顺序排列
                * 返回值：自定义
            * `public mixed runAction($id, $params = [])`
                * 功能：运行指定的动作(必须在当前控制器内)
                * 参数  
                    * `route`:string。当前控制器听其他的动作id
                    * `params`:array。参数，不能指定键值，按顺序排列
                * 返回值：自定义
            
